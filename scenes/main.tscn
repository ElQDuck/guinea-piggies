[gd_scene load_steps=15 format=3 uid="uid://b74phqnk6cljg"]

[ext_resource type="Script" path="res://scripts/Table.gd" id="1_fo1c3"]
[ext_resource type="Texture2D" uid="uid://cjblj0v0n8pni" path="res://assets/cards/card_preset.png" id="1_t0gp3"]
[ext_resource type="Script" path="res://scripts/Deck.gd" id="2_brk4h"]
[ext_resource type="Script" path="res://scripts/Player1.gd" id="2_s56it"]
[ext_resource type="Script" path="res://scripts/Player2.gd" id="3_bs3t5"]
[ext_resource type="Texture2D" uid="uid://b5fwknhuot5gb" path="res://assets/icon.svg" id="6_hkrqt"]
[ext_resource type="Script" path="res://scripts/SelectDiceButton.gd" id="7_on0k7"]
[ext_resource type="Script" path="res://scripts/NewRoundButton.gd" id="8_ub627"]
[ext_resource type="Script" path="res://scripts/GameOverStats.gd" id="9_36wbk"]
[ext_resource type="Script" path="res://scripts/NewGameButton.gd" id="10_8hl7a"]
[ext_resource type="Texture2D" uid="uid://bo8p8xgav6a18" path="res://assets/backgrounds/cave.png" id="11_5n41x"]
[ext_resource type="PackedScene" uid="uid://bkpglbq6yv1v0" path="res://scenes/player.tscn" id="11_ah7ty"]

[sub_resource type="Gradient" id="Gradient_d8adn"]
colors = PackedColorArray(0, 0, 0, 1, 1, 0.0784314, 0.101961, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_t4tp5"]
gradient = SubResource("Gradient_d8adn")

[node name="Game" type="Node2D"]

[node name="Table" type="Node2D" parent="."]
script = ExtResource("1_fo1c3")

[node name="Player1" type="Node2D" parent="."]
script = ExtResource("2_s56it")

[node name="Player2" type="Node2D" parent="."]
script = ExtResource("3_bs3t5")

[node name="TableUi" type="CanvasLayer" parent="."]
visible = false

[node name="VBoxContainer" type="VBoxContainer" parent="TableUi"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Player1" type="HBoxContainer" parent="TableUi/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="ProfileImage" type="TextureRect" parent="TableUi/VBoxContainer/Player1"]
layout_mode = 2
size_flags_horizontal = 4
texture = ExtResource("6_hkrqt")
expand_mode = 3
stretch_mode = 5

[node name="EndTurn" type="Button" parent="TableUi/VBoxContainer/Player1"]
layout_mode = 2
size_flags_horizontal = 3
text = "End Turn"

[node name="ShowCards" type="Button" parent="TableUi/VBoxContainer/Player1"]
layout_mode = 2
size_flags_horizontal = 3
text = "Show Cards"

[node name="VBoxContainer" type="VBoxContainer" parent="TableUi/VBoxContainer/Player1"]
layout_mode = 2

[node name="PlayerName" type="Label" parent="TableUi/VBoxContainer/Player1/VBoxContainer"]
layout_mode = 2
text = "PlayerName"

[node name="Score" type="Label" parent="TableUi/VBoxContainer/Player1/VBoxContainer"]
layout_mode = 2
text = "Score:"

[node name="Cards" type="HBoxContainer" parent="TableUi/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 3.0

[node name="MarginContainer" type="MarginContainer" parent="TableUi/VBoxContainer/Cards"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Deck" type="TextureButton" parent="TableUi/VBoxContainer/Cards/MarginContainer"]
layout_mode = 2
texture_normal = ExtResource("1_t0gp3")
stretch_mode = 5
script = ExtResource("2_brk4h")

[node name="GridContainer" type="GridContainer" parent="TableUi/VBoxContainer/Cards"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 7.0
columns = 6

[node name="Player2" type="HBoxContainer" parent="TableUi/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="ProfileImage" type="TextureRect" parent="TableUi/VBoxContainer/Player2"]
layout_mode = 2
size_flags_horizontal = 4
texture = ExtResource("6_hkrqt")
expand_mode = 3
stretch_mode = 5

[node name="VBoxContainer" type="VBoxContainer" parent="TableUi/VBoxContainer/Player2"]
layout_mode = 2

[node name="PlayerName" type="Label" parent="TableUi/VBoxContainer/Player2/VBoxContainer"]
layout_mode = 2
text = "PlayerName"

[node name="Score" type="Label" parent="TableUi/VBoxContainer/Player2/VBoxContainer"]
layout_mode = 2
text = "Score:"

[node name="EndTurn" type="Button" parent="TableUi/VBoxContainer/Player2"]
layout_mode = 2
size_flags_horizontal = 3
text = "End Turn"

[node name="ShowCards" type="Button" parent="TableUi/VBoxContainer/Player2"]
layout_mode = 2
size_flags_horizontal = 3
text = "Show Cards"

[node name="DiceSelectionUi" type="CanvasLayer" parent="."]
visible = false

[node name="Panel" type="Panel" parent="DiceSelectionUi"]
self_modulate = Color(0, 0.65355, 0.325028, 1)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="DiceSelectionUi"]
anchors_preset = -1
anchor_left = 0.2
anchor_top = 0.2
anchor_right = 0.8
anchor_bottom = 0.8
grow_horizontal = 2
grow_vertical = 2

[node name="Label" type="Label" parent="DiceSelectionUi/VBoxContainer"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
size_flags_vertical = 10
text = "Choose the number of cards you want to steal from your oponent."
autowrap_mode = 2

[node name="HBoxContainer" type="HBoxContainer" parent="DiceSelectionUi/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="1" type="TextureButton" parent="DiceSelectionUi/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
toggle_mode = true
texture_normal = ExtResource("6_hkrqt")
texture_pressed = SubResource("GradientTexture2D_t4tp5")
stretch_mode = 5

[node name="2" type="TextureButton" parent="DiceSelectionUi/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
toggle_mode = true
texture_normal = ExtResource("6_hkrqt")
texture_pressed = SubResource("GradientTexture2D_t4tp5")
stretch_mode = 5

[node name="3" type="TextureButton" parent="DiceSelectionUi/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
toggle_mode = true
texture_normal = ExtResource("6_hkrqt")
texture_pressed = SubResource("GradientTexture2D_t4tp5")
stretch_mode = 5

[node name="Button" type="Button" parent="DiceSelectionUi/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
text = "GO!"
script = ExtResource("7_on0k7")

[node name="RoundEndUi" type="CanvasLayer" parent="."]
visible = false

[node name="Panel" type="Panel" parent="RoundEndUi"]
self_modulate = Color(0, 0.65355, 0.325028, 1)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="RoundEndUi"]
anchors_preset = -1
anchor_left = 0.2
anchor_top = 0.2
anchor_right = 0.8
anchor_bottom = 0.8
grow_horizontal = 2
grow_vertical = 2

[node name="Label" type="Label" parent="RoundEndUi/VBoxContainer"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
size_flags_vertical = 10
text = "No cards in deck.
Start new round"
autowrap_mode = 2

[node name="HBoxContainer" type="HBoxContainer" parent="RoundEndUi/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="NewRoundButton" type="Button" parent="RoundEndUi/VBoxContainer"]
layout_mode = 2
text = "OK"
script = ExtResource("8_ub627")

[node name="GameEndUi" type="CanvasLayer" parent="."]
visible = false

[node name="Panel" type="Panel" parent="GameEndUi"]
self_modulate = Color(0, 0.65355, 0.325028, 1)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="GameEndUi"]
anchors_preset = -1
anchor_left = 0.2
anchor_top = 0.2
anchor_right = 0.8
anchor_bottom = 0.8
grow_horizontal = 2
grow_vertical = 2

[node name="Label" type="Label" parent="GameEndUi/VBoxContainer"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
size_flags_vertical = 10
text = "Game Over"
autowrap_mode = 2
script = ExtResource("9_36wbk")

[node name="HBoxContainer" type="HBoxContainer" parent="GameEndUi/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="NewGameButton" type="Button" parent="GameEndUi/VBoxContainer"]
layout_mode = 2
text = "Start new Game"
script = ExtResource("10_8hl7a")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Background" type="TextureRect" parent="CanvasLayer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("11_5n41x")

[node name="Player1" parent="CanvasLayer" instance=ExtResource("11_ah7ty")]
player_name = "Player 1"
primary_color = Color(0.850337, 0.249435, 0.278066, 1)
secondary_color = Color(0.925197, 0.605826, 0.7781, 1)
complementary_color = Color(0.116443, 0.393503, 0.678787, 1)

[node name="Player2" parent="CanvasLayer" instance=ExtResource("11_ah7ty")]
rotation = 3.14159
player_name = "Player2"
primary_color = Color(0.899169, 0.921725, 0.323017, 1)
secondary_color = Color(0.7785, 0.86241, 0.474671, 1)
complementary_color = Color(0.798137, 0.211894, 0.664739, 1)

[node name="Table" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Cards" type="HBoxContainer" parent="CanvasLayer/Table"]
layout_mode = 1
anchors_preset = 14
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_top = -284.0
offset_bottom = 284.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 3.0

[node name="DeckArea" type="Control" parent="CanvasLayer/Table/Cards"]
layout_mode = 2
size_flags_horizontal = 3

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer/Table/Cards/DeckArea"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 48
theme_override_constants/margin_top = 0
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 0

[node name="Deck" type="TextureButton" parent="CanvasLayer/Table/Cards/DeckArea/MarginContainer"]
layout_mode = 2
texture_normal = ExtResource("1_t0gp3")
stretch_mode = 5
script = ExtResource("2_brk4h")

[node name="DrawnCardsArea" type="Control" parent="CanvasLayer/Table/Cards"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 4.0

[node name="DrawnCards" type="Control" parent="CanvasLayer/Table/Cards/DrawnCardsArea"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2

[connection signal="pressed" from="TableUi/VBoxContainer/Player1/EndTurn" to="Player1" method="_on_end_turn_pressed"]
[connection signal="pressed" from="TableUi/VBoxContainer/Player1/ShowCards" to="Player1" method="_on_show_cards_pressed"]
[connection signal="card_drawn_from_deck" from="TableUi/VBoxContainer/Cards/MarginContainer/Deck" to="Table" method="_card_drawn_from_deck"]
[connection signal="pressed" from="TableUi/VBoxContainer/Cards/MarginContainer/Deck" to="TableUi/VBoxContainer/Cards/MarginContainer/Deck" method="_on_pressed"]
[connection signal="pressed" from="TableUi/VBoxContainer/Player2/EndTurn" to="Player2" method="_on_end_turn_pressed"]
[connection signal="pressed" from="TableUi/VBoxContainer/Player2/ShowCards" to="Player2" method="_on_show_cards_pressed"]
[connection signal="toggled" from="DiceSelectionUi/VBoxContainer/HBoxContainer/1" to="DiceSelectionUi/VBoxContainer/Button" method="_on__toggled_1"]
[connection signal="toggled" from="DiceSelectionUi/VBoxContainer/HBoxContainer/2" to="DiceSelectionUi/VBoxContainer/Button" method="_on__toggled_2"]
[connection signal="toggled" from="DiceSelectionUi/VBoxContainer/HBoxContainer/3" to="DiceSelectionUi/VBoxContainer/Button" method="_on__toggled_3"]
[connection signal="pressed" from="DiceSelectionUi/VBoxContainer/Button" to="DiceSelectionUi/VBoxContainer/Button" method="_on_self_pressed"]
[connection signal="pressed" from="RoundEndUi/VBoxContainer/NewRoundButton" to="RoundEndUi/VBoxContainer/NewRoundButton" method="_on_pressed"]
[connection signal="pressed" from="GameEndUi/VBoxContainer/NewGameButton" to="GameEndUi/VBoxContainer/NewGameButton" method="_on_pressed"]
[connection signal="card_drawn_from_deck" from="CanvasLayer/Table/Cards/DeckArea/MarginContainer/Deck" to="Table" method="_card_drawn_from_deck"]
[connection signal="pressed" from="CanvasLayer/Table/Cards/DeckArea/MarginContainer/Deck" to="CanvasLayer/Table/Cards/DeckArea/MarginContainer/Deck" method="_on_pressed"]
